<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Build stick objects from xyz (lat/long/abundance) data for use in stickplots — build_sf_sticks • MACEReports</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Build stick objects from xyz (lat/long/abundance) data for use in stickplots — build_sf_sticks"><meta name="description" content="Accepts xyz data (for example, longitude/latitude/abundance) and returns a vertical 'stick'
at each position. Sticks are returned as sf LINESTRING objects.
These objects can be plotted using ggplot2::geom_sf() or base plot."><meta property="og:description" content="Accepts xyz data (for example, longitude/latitude/abundance) and returns a vertical 'stick'
at each position. Sticks are returned as sf LINESTRING objects.
These objects can be plotted using ggplot2::geom_sf() or base plot."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MACEReports</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/MACEReports-mapping.html">Mapping with MACEReports</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Build stick objects from xyz (lat/long/abundance) data for use in stickplots</h1>

      <div class="d-none name"><code>build_sf_sticks.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Accepts xyz data (for example, longitude/latitude/abundance) and returns a vertical 'stick'
at each position. Sticks are returned as <code>sf LINESTRING</code> objects.
These objects can be plotted using <code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">ggplot2::geom_sf()</a></code> or base <code>plot</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build_sf_sticks</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">z</span>,</span>
<span>  group_variable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rotation <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  bar_scale <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  crs <span class="op">=</span> <span class="st">"EPSG:3338"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>x- position</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Y- position</p></dd>


<dt id="arg-z">z<a class="anchor" aria-label="anchor" href="#arg-z"></a></dt>
<dd><p>Abundance value (the value that will be used to scale sticks)</p></dd>


<dt id="arg-group-variable">group_variable<a class="anchor" aria-label="anchor" href="#arg-group-variable"></a></dt>
<dd><p>If specified, will specify the group for each stick; this can be used
to identify sticks by group.</p></dd>


<dt id="arg-return-df">return_df<a class="anchor" aria-label="anchor" href="#arg-return-df"></a></dt>
<dd><p>If specified, will include all columns from the original dataframe in the returned object.
Only one of 'group_variable' or 'return_df' should be specified.</p></dd>


<dt id="arg-rotation">rotation<a class="anchor" aria-label="anchor" href="#arg-rotation"></a></dt>
<dd><p>Rotation of the sticks in degrees from the vertical. Default is 5 degrees.
0 = no rotation; positive values rotate bars in a clockwise direction.</p></dd>


<dt id="arg-bar-scale">bar_scale<a class="anchor" aria-label="anchor" href="#arg-bar-scale"></a></dt>
<dd><p>The relative size of sticks. Default is ~1/2 of total plot height.</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p>The coordinate reference system (CRS) into which sticks will be projected. By default, objects will be returned using the default CRS (Albers Equal Area Alaska, EPSG 3338). Any other valid projection can be specified. Note that this relies on the <a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">sf::st_crs</a> function- make sure you are using a valid CRS argument.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"x"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">152.2</span>, <span class="op">-</span><span class="fl">150.3</span>, <span class="op">-</span><span class="fl">159.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"y"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55.2</span>, <span class="fl">55.8</span>, <span class="fl">55.6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"z"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7500</span>, <span class="fl">40000</span>, <span class="fl">28000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"species"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sticks can be plotted with ggplot2::geom_sf(),</span></span></span>
<span class="r-in"><span><span class="co"># and Coordinate Reference System (CRS) conversions are handled by sf::st_crs()</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Linking to GEOS 3.13.1, GDAL 3.10.2, PROJ 9.5.1; sf_use_s2() is TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you have to provide x,y,z at minimum</span></span></span>
<span class="r-in"><span><span class="va">sticks</span> <span class="op">&lt;-</span> <span class="fu">build_sf_sticks</span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">y</span>, z <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">z</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot with ggplot2 geom_sf()</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sticks</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="build_sf_sticks-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or with base r plotting</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sticks</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="build_sf_sticks-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the rotation (from 0) can be specified (in degrees from 0-360). If not specified,</span></span></span>
<span class="r-in"><span><span class="co"># sticks will be rotated to 5 degrees</span></span></span>
<span class="r-in"><span><span class="va">sticks</span> <span class="op">&lt;-</span> <span class="fu">build_sf_sticks</span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">y</span>, z <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">z</span>, rotation <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sticks</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="build_sf_sticks-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If a CRS is not specified, none will be assigned; if one is specified,</span></span></span>
<span class="r-in"><span><span class="co"># it will be set using sf st_crs()</span></span></span>
<span class="r-in"><span><span class="va">sticks</span> <span class="op">&lt;-</span> <span class="fu">build_sf_sticks</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">y</span>, z <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">z</span>, rotation <span class="op">=</span> <span class="fl">15</span>, crs <span class="op">=</span> <span class="fl">3338</span>,</span></span>
<span class="r-in"><span>  group_variable <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">species</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sticks</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="build_sf_sticks-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sticks are automatically scaled so that the largest abundance value</span></span></span>
<span class="r-in"><span><span class="co"># this can be modified with bar_scale argument</span></span></span>
<span class="r-in"><span><span class="va">sticks</span> <span class="op">&lt;-</span> <span class="fu">build_sf_sticks</span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">y</span>, z <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">z</span>, rotation <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>, bar_scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sticks2</span> <span class="op">&lt;-</span> <span class="fu">build_sf_sticks</span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">y</span>, z <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">z</span>, rotation <span class="op">=</span> <span class="fl">5</span>, bar_scale <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sticks</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sticks2</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="build_sf_sticks-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mike Levine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

